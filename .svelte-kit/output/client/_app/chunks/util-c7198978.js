var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,n=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&o(e,t,a[t]);if(r)for(var t of r(a))i.call(a,t)&&o(e,t,a[t]);return e},c=(e,r)=>a(e,t(r));import{a1 as l,a2 as d,C as p,a3 as u,Y as m,a6 as f,a7 as y,S as g,i as h,s as b,e as v,c as O,a as S,d as E,b as w,L as D,f as L,F as T,G as j,H as _,A as C,a5 as x,J as A}from"./vendor-5c691847.js";import{_ as P}from"./preload-helper-13c00eaa.js";let I;let J;const N=l(p({code:"graph TD\n    A[Nowrooz] --\x3e|Get money| B(Go shopping)\n    B --\x3e C{Let me think}\n    C --\x3e|One| D[Laptop]\n    C --\x3e|Two| E[iPhone]\n    C --\x3e|Three| F[fa:fa-car Car]\n  ",mermaid:JSON.stringify({theme:"default"},null,2),updateEditor:!1,autoSync:!0,updateDiagram:!0}),d(),"codeStore"),k=u([N],(([e],a)=>{a(m(JSON.stringify(e),!0))})),V=e=>{N.update((a=>n(n({},a),e)))};let G=!1;const R=(e,a,t=!1)=>{var r;r=e,I&&(clearTimeout(J),J=setTimeout((function(){const e=r.replace(/^\s*%%.*\n/g,"\n").trimStart().split(" ")[0];console.debug("ga:","send","event","render",e),I.track("render",{graphType:e})}),5e3));if((e.match(/\n/g)||"").length+1>50&&!G&&f(N).autoSync){const e=confirm("Long diagram deteced. Turn off Auto Sync? Click the sync logo to manually sync.");G=!0,e&&V({autoSync:!1})}N.update((r=>c(n({},r),{code:e,updateEditor:a,updateDiagram:t})))},z=(e,a)=>{N.update((t=>c(n({},t),{mermaid:e,updateEditor:a})))},B=p(void 0);function F(e){let a,t;return{c(){a=v("div"),t=v("div"),this.h()},l(e){a=O(e,"DIV",{id:!0,class:!0});var r=S(a);t=O(r,"DIV",{id:!0,class:!0}),S(t).forEach(E),r.forEach(E),this.h()},h(){w(t,"id","container"),w(t,"class","flex-1 overflow-auto"),w(a,"id","view"),w(a,"class","p-2 svelte-5ndy2s"),D(a,"error",e[1]),D(a,"outOfSync",e[2])},m(r,s){L(r,a,s),T(a,t),e[3](t)},p(e,[t]){2&t&&D(a,"error",e[1]),4&t&&D(a,"outOfSync",e[2])},i:j,o:j,d(t){t&&E(a),e[3](null)}}}function H(e,a,t){let r;_(e,N,(e=>t(7,r=e)));const s=window.mermaid;let i,o="",n="",c=!1,l=!1,d=!0;return C((()=>{N.subscribe((e=>{try{if(i&&e&&(e.updateDiagram||e.autoSync)){if(e.autoSync||x(N,r.updateDiagram=!1,r),t(2,l=!1),d=!0,o===e.code&&n===e.mermaid)return;o=e.code,n=e.mermaid;const a=i.parentElement.parentElement.parentElement.scrollTop;delete i.dataset.processed,s.initialize(Object.assign({},JSON.parse(e.mermaid))),s.render("graph-div",o,(e=>{t(0,i.innerHTML=e,i)})),t(0,i.parentElement.parentElement.parentElement.scrollTop=a,i),t(1,c=!1)}else d?d=!1:t(2,l=!0)}catch(a){t(1,c=!0)}})),B.subscribe((e=>{t(1,c=void 0!==e)}))})),[i,c,l,function(e){A[e?"unshift":"push"]((()=>{i=e,t(0,i)}))}]}class $ extends g{constructor(e){super(),h(this,e,H,F,b,{})}}const M=()=>{(e=>{let a;try{const t=y(e);a=JSON.parse(t);const r="string"==typeof a.mermaid?JSON.parse(a.mermaid):a.mermaid;r.securityLevel&&"strict"!==r.securityLevel&&confirm(`Removing "securityLevel":"${r.securityLevel}" from the config for safety.\nClick Cancel if you trust the source of this Diagram.`)&&delete r.securityLevel,a.mermaid=JSON.stringify(r,null,2)}catch(t){e&&console.error("Init error",t),a=f(N)}V(c(n({},a),{updateEditor:!0}))})(window.location.hash.slice(1))},U=()=>{V({updateDiagram:!0})},Y=async()=>{M(),U(),k.subscribe((e=>{history.replaceState(void 0,void 0,`#${e}`)})),await(async()=>{if(!I)try{const{Analytics:e}=await P((()=>import("./analytics.browser.es-eaddcc60.js")),[]),a=await P((()=>import("./analytics-plugin-ga.browser.es-1cdb0512.js")),[]);I=e({app:"mermaid-live-editor",plugins:[a.init({trackingId:"UA-153180559-1"})]})}catch{console.info("Analytics blocked ;)")}})(),null==I||I.page()};export{$ as V,I as a,k as b,N as c,z as d,B as e,Y as i,U as s,R as u};
